# SYNOPSIS:
#
#   make [all]     - makes examples
#   make clean     - removes all files generated by make except executable
#   make cleaneast - removes all files generated by make including executable

CXXVERSION  = -std=c++1y
CXXFLAGS   += -O0 -g3 -Wall -fmessage-length=0 -Wno-reorder -Wno-unused -pthread
LDFLAGS    += -lpthread

BASEDIR     = ..
HEADERS    += -I$(BASEDIR)/src/include
HEADERS    += -I$(BASEDIR)/contrib/asio/asio/include
SYMBOLS    += -DASIO_STANDALONE
EXEC        = conwrap

all : $(EXEC) clean

$(EXEC) : main.o
	$(CXX) $(CXXFLAGS) -o $(EXEC) $^ $(LDFLAGS)

main.o :
	$(CXX) $(CXXVERSION) $(SYMBOLS) $(HEADERS) $(CXXFLAGS) -c -o $@ $(BASEDIR)/examples/main.cpp

clean :
	rm -f *.o

cleanest : clean
	rm $(EXEC)
